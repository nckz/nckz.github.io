<!DOCTYPE html>













<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  
  <title>Hugo Blog - Toughiculties</title>

  
  
  <meta name="description" content="a short howto for starting Hugo on GitHub" />
  <meta name="author" content="Nicholas Zwart" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://toughiculties.com/app.min.css" />

  
  <link rel="preload stylesheet" as="style" href="https://toughiculties.com/an-old-hope.min.css" />
  <script
    defer
    src="https://toughiculties.com/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  <link rel="preload" as="image" href="https://toughiculties.com/theme.png" />

  
  <link rel="preload" as="image" href="https://toughiculties.com/github.svg" />
  

  
  <link rel="icon" href="https://toughiculties.com/favicon.ico" />
  <link rel="apple-touch-icon" href="https://toughiculties.com/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.101.0" />

  
  

  
  
  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-76185171-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-76185171-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
  
  
  
  <meta property="og:title" content="Hugo Blog" />
<meta property="og:description" content="a short howto for starting Hugo on GitHub" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://toughiculties.com/posts/2022-01-22-starting-new-hugo-blog/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-22T22:38:35-05:00" />
<meta property="article:modified_time" content="2022-01-22T22:38:35-05:00" />


  
  <meta itemprop="name" content="Hugo Blog">
<meta itemprop="description" content="a short howto for starting Hugo on GitHub"><meta itemprop="datePublished" content="2022-01-22T22:38:35-05:00" />
<meta itemprop="dateModified" content="2022-01-22T22:38:35-05:00" />
<meta itemprop="wordCount" content="755">
<meta itemprop="keywords" content="" />
  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Hugo Blog"/>
<meta name="twitter:description" content="a short howto for starting Hugo on GitHub"/>

  
  
</head>


  <body class="not-ready" data-menu="false">
    <header class="header">
  
  <p class="logo">
    <a class="site-name" href="https://toughiculties.com/">Toughiculties</a><a class="btn-dark"></a>
  </p>
  

  <script>
    let bodyClx = document.body.classList;
    let btnDark = document.querySelector('.btn-dark');
    let sysDark = window.matchMedia('(prefers-color-scheme: dark)');
    let darkVal = localStorage.getItem('dark');

    let setDark = (isDark) => {
      bodyClx[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark ? 'yes' : 'no');
    };

    setDark(darkVal ? darkVal === 'yes' : sysDark.matches);
    requestAnimationFrame(() => bodyClx.remove('not-ready'));

    btnDark.addEventListener('click', () => setDark(!bodyClx.contains('dark')));
    sysDark.addEventListener('change', (event) => setDark(event.matches));
  </script>

  
  

  
  <nav class="social">
    
    <a
      class="github"
      style="--url: url(./github.svg)"
      href="https://github.com/nckz"
      target="_blank"
    ></a>
    
  </nav>
  
</header>


    <main class="main">

<article class="post-single">
  <header class="post-title">
    <p>
      <time>Jan 22, 2022</time>
      
      <span>Nicholas Zwart</span>
      
    </p>
    <h1>Hugo Blog</h1>
  </header>
  <section class="post-content"><p>I&rsquo;m looking for the quickest way to start a blog and the easiest blogging tool
to maintain.  After looking thru a few of the &ldquo;Top 10 Static Blogging Tools&rdquo;
sites, I landed on <a href="https://gohugo.io/">Hugo</a>.  Its written in <code>Go</code> which makes
it very portable. The tools are available in <a href="https://brew.sh/">brew</a> and
<a href="https://www.macports.org/">port</a>, two of my favorite MacOS package management
tools.</p>
<h1 id="quickstart">Quickstart</h1>
<p>I followed the <a href="https://gohugo.io/getting-started/quick-start/">quick-start guide</a>
and installed the tools with brew:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>brew install hugo
</span></span><span style="display:flex;"><span>hugo version
</span></span><span style="display:flex;"><span>&gt; hugo v0.92.0+extended darwin/amd64 BuildDate<span style="color:#f92672">=</span>unknown
</span></span></code></pre></div><p>I decided to use the &lsquo;docs&rsquo; directory to publish to on github; for some reason
github only offers two options</p>
<ul>
<li><code>/ (root)</code></li>
<li><code>/docs</code></li>
</ul>
<p>It feels cleaner to publish to an output directory.</p>
<p>NOTE: don&rsquo;t forget to</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>touch .nojekyll &amp; git add .nojekyll
</span></span></code></pre></div><p>in the root directory; this will prevent the GitHub Action from trying to run
jekyll (This can reduce the build time to a few seconds). As described in this
<a href="https://github.blog/2009-12-29-bypassing-jekyll-on-github-pages/">post</a>
it must be placed in the document root.</p>
<h2 id="build-site-and-serve">build-site and serve</h2>
<p>The instructions call for building and testing the site with the commands:</p>
<ul>
<li>to build</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>hugo -d ./docs
</span></span><span style="display:flex;"><span>git add docs
</span></span></code></pre></div><ul>
<li>to start a local server on localhost:1313</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>hugo server
</span></span></code></pre></div><p>I like to ensure that the commands are run from the correct directory (in this
case its the project-root directory).  So I rolled these commands into bash
scripts:</p>
<p><a href="https://github.com/nckz/nckz.github.io/blob/hugo/bin/build-site">build-site</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>SWD<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span> cd <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span> dirname <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BASH_SOURCE[0]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">&amp;&amp;</span> pwd <span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>PROJECT_ROOT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span> dirname <span style="color:#e6db74">&#34;</span>$SWD<span style="color:#e6db74">&#34;</span> <span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>DOCS_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;docs&#34;</span>
</span></span><span style="display:flex;"><span>TGT_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>PROJECT_ROOT<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>DOCS_DIR<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cd <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>PROJECT_ROOT<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>hugo -d <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>TGT_DIR<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>git add <span style="color:#e6db74">${</span>DOCS_DIR<span style="color:#e6db74">}</span>
</span></span></code></pre></div><p><a href="https://github.com/nckz/nckz.github.io/blob/hugo/bin/build-site">serve</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>SWD<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span> cd <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span> dirname <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BASH_SOURCE[0]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">&amp;&amp;</span> pwd <span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>PROJECT_ROOT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span> dirname <span style="color:#e6db74">&#34;</span>$SWD<span style="color:#e6db74">&#34;</span> <span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cd <span style="color:#e6db74">&#34;</span>$PROJECT_ROOT<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>hugo server
</span></span></code></pre></div><h2 id="new-post">new-post</h2>
<p>The method for starting a new post also requires some memory; you have to
invoke the &rsquo;new&rsquo; sub-command and the content org structure:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>hugo new content/posts/&lt;post-name&gt;.md
</span></span></code></pre></div><p><a href="https://github.com/nckz/nckz.github.io/blob/hugo/bin/new-post">new-post</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>POST_SLUG<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SWD<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span> cd <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span> dirname <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>BASH_SOURCE[0]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">&amp;&amp;</span> pwd <span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>PROJECT_ROOT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span> dirname <span style="color:#e6db74">&#34;</span>$SWD<span style="color:#e6db74">&#34;</span> <span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NOW<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>date <span style="color:#e6db74">&#34;+%Y-%m-%d&#34;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>TGT_POST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;content/posts/</span>$NOW<span style="color:#e6db74">-</span>$POST_SLUG<span style="color:#e6db74">.md&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cd <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>PROJECT_ROOT<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>hugo new -v <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>TGT_POST<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><p>This script automates the prefix, date and file extention to reduce the barrier
for starting new posts.  It takes one argument for the base filename.  The
verbose switch is used to remind you where to find the files.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./bin/new-post hugo-blog
</span></span><span style="display:flex;"><span>&gt; Content <span style="color:#e6db74">&#34;/Users/nick/src/nckz.github.io/content/posts/2022-01-22-hugo-blog.md&#34;</span> created
</span></span></code></pre></div><h1 id="finalize">Finalize</h1>
<p>There are a few other instructions (not listed here) that deal with theme-ing
and configuration.  The things that caused more time than necessary were the
new instructions on linking DNS and setting up HTTPS in GitHub.</p>
<p>From the GitHub <code>Settings-&gt;Pages</code> menu, in the target repository, you can
automatically enter the CNAME in a UI field which will write a file in your
repo at the location that corresponds with your site&rsquo;s root, e.g.:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat docs/CNAME
</span></span><span style="display:flex;"><span>&gt;toughiculties.com
</span></span></code></pre></div><p>You&rsquo;ll have to make an A record with one of the IP addresses listed here:
<a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain">Managing a custom domain&hellip;</a>.</p>
<p>It&rsquo;s also important to make sure that all configured urls have &lsquo;HTTPS&rsquo; i.e.
the main configuration file
<a href="https://github.com/nckz/nckz.github.io/blob/hugo/config.toml">config.toml</a>.</p>
<p>When this is all in order; you&rsquo;ll have the option to check the &lsquo;Enforce HTTPS&rsquo;
box which will automatically requisition a certificate from
<a href="https://letsencrypt.org/">Let&rsquo;s Encrypt</a>.</p>
<p>This can all take a while (minutes/hours) before the automated checks embedded
in the GitHub <code>Settings-&gt;Pages</code> menu will allow you to proceed.  When all
checks are green, the site will be ready to preen.</p>
<h1 id="additions">Additions</h1>
<p>Since I moved my blog from a previous setup
(<a href="https://github.com/nckz/GitStrap">GitStrap</a>); I wanted to move the
Google Analytics tracker and Disqus comments over too.</p>
<h2 id="google-analytics">Google Analytics</h2>
<p>First I copied the existing
<a href="https://support.google.com/webmasters/answer/9008080?hl=en">site verification html file</a>
to the <code>/docs</code> directory; this works automatically.</p>
<p>Then I added my &lsquo;property id&rsquo; to the
<a href="https://gohugo.io/templates/internal/#google-analytics">configuration file</a>.
I&rsquo;m using the <a href="https://github.com/theNewDynamic/gohugo-theme-ananke#readme">Ananke</a>
theme so the instructions for enabling addons can be found her in the
<a href="https://github.com/theNewDynamic/gohugo-theme-ananke#production">Production</a> section.
I had to add <code>HUGO_ENV=production</code> to my build command.</p>
<p>The layout is automatically taken up and added on the next build. This can be
verified by viewing the &lsquo;Realtime&rsquo; stats in
<a href="https://analytics.google.com">Google Analytics</a>.</p>
<h2 id="disqus-comments">Disqus Comments</h2>
<p>This was an easy addition; just add the shortname to the config as shown in
<a href="https://gohugo.io/templates/internal/#configure-disqus">Configure Discuss</a>.
The <a href="https://github.com/theNewDynamic/gohugo-theme-ananke#readme">Ananke</a> theme
already has these tags builtin to the layout so there is no need to modify
the existing layout.</p>
<h2 id="gitignore">.gitignore</h2>
<p>It&rsquo;s important to know which files are not necessary to track; there seems to
be consensus around the <code>resources/_gen</code> directory (see
<a href="https://gist.github.com/muhannad0/e78f14d7bfa2a1a48320ec7194e5c516">example</a>).</p>
<h2 id="images">Images</h2>
<p>Make a directory &lsquo;images&rsquo; under the &lsquo;static&rsquo; directory; image refs in the posts
or in the configs will then be made relative to <code>/images</code>.</p>
<h2 id="ananke-theme-config">Ananke Theme Config</h2>
<p>For more configuration tips check out the
<a href="https://github.com/theNewDynamic/gohugo-theme-ananke/blob/master/exampleSite/config.toml">example config</a>.</p>
<h2 id="favicon">Favicon</h2>
<p>This was nice and easy; drag&rsquo;n dropped a PNG onto the
<a href="https://favicon.io/">favicon.io</a> &lsquo;Image&rsquo; page and got my &lsquo;favicon.ico&rsquo; file.</p>
</section>

  
  

  
  
  
  <nav class="post-nav">
    
    <a class="prev" href="https://toughiculties.com/posts/2022-09-10_pyscript/"><span>←</span><span>PyScript</span></a>
     
    <a class="next" href="https://toughiculties.com/posts/2016-07-21_shrinking_vmware_vms/"><span>Shrinking VMware VMs with Fusion</span><span>→</span></a>
    
  </nav>
  

  
  
  <div id="disqus_thread" class="post-comments"></div>
  <script>
    var disqusShortname = 'nckz';
    var script = document.createElement('script');
    script.src = 'https://' + disqusShortname + '.disqus.com/embed.js';
    script.setAttribute('data-timestamp', +new Date());
    document.head.appendChild(script);
  </script>
  
</article>

</main>

    <footer class="footer">
  <p>&copy; 2022 <a href="https://toughiculties.com/">Toughiculties</a></p>
  <p>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>️</p>
  <p>
    <a href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank">Paper 5.1</a>
  </p>
</footer>

  </body>
</html>
